{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": { "text": "Total crashes in different states in the past 10 years (2013 - July 2023)" },
    "data":{
      "url": "https://raw.githubusercontent.com/trung1411/Data-visualisation-2/main/ardd_fatalities.csv",
      "format": {"type": "csv"}
    },
    "width": 400,
    "transform": [{
      "fold": [
        "CrashID",
        "State",
        "Month",
        "Year",
        "Dayweek",
        "Time",
        "Crash Type",
        "Bus Involvement",
        "Heavy Rigid Truck Involvement",
        "Ariculated Truck Involvement",
        "Speed Limit",
        "Road User",
        "Gender",
        "Age",
        "National remote Areas",
        "SA4 Nam3 2021",
        "National Road Type",
        "Christmas Period",
        "Easter Period",
        "Age Group", 
        "Day of week",
        "Time of day"
      ], "as": ["Column", "Value"]
    },{
      "filter": "isValid(datum.Value)"
    }],
    "mark": "bar",
    "encoding": {
      "x": {
        "field": "Age Group", 
        "type": "nominal", "axis": {
          "labelExpr": "[datum.value == -9 ? 'Unknown' : datum.value]"
        }
      },
      "y":{
        "field": "CrashID",
        "type": "quantitative",
        "aggregate": "count"},
        "color": {"field": "Gender", "type": "nominal", "legend":{"values":["Male", "Female"]
  
        }
    
      }
  
    }}
    
  